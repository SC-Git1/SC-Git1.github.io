<!DOCTYPE html> 
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title> Module 1 | Conda</title>
      <meta name="author" content="Sophie Colette">
      <meta name="description" content="Module 1: Introduction to Conda">
      <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website">
      <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous">
      <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css">
      <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5">
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">
      <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light">
      <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">
      <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e">
      <link rel="canonical" href="https://sc-git1.github.io/blog/2021/distill/">
      <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark">
      <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> 
      <style> p{text-align: justify;margin-bottom: 0;}</style>
      <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style>
   </head>
   <body>
      <header>
         <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
            <div class="container">
               <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Workshop </span>SNP Calling on the VSC</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> 
               <div class="collapse navbar-collapse text-right" id="navbarNav">
                  <ul class="navbar-nav ml-auto flex-nowrap">
                     <li class="nav-item "> <a class="nav-link" href="/">about</a> </li>
                     <li class="nav-item "> <a class="nav-link" href="/workshop/">workshop</a> </li>
                     <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li>
                  </ul>
               </div>
            </div>
         </nav>
         <progress id="progress" value="0">
            <div class="progress-container"> <span class="progress-bar"></span> </div>
         </progress>
      </header>
      <div class="post distill">
         <d-title>
            <h1>Module 1: Conda</h1>
            <p>Introduction to the package manager Conda and installation of Miniconda.</p>
         </d-title>
         <d-article>
            <d-contents>
               <nav class="l-text figcaption">
                  <h3>Contents</h3>
                  <div><a href="#What is Conda?">What is Conda?</a></div>
                  <div><a href="#Installation">Installation</a></div>
                  <div><a href="#Conda Commands">Conda Commands</a></div>
                  <div><a href="#Tips">Tips</a></div>
               </nav>
            </d-contents>
            <h2 id="What is Conda?">What is Conda?</h2>
            <p>A lot of bioinformatics software is distributed in the form of a package. Two popular formats are Conda packages and Pip packages.
               For now, let's focus on Conda packages. A Conda package is basically an archive file of the software with any metadata needed for its installation.
               It is either a compressed tarball (.tar.bz2 files ) or a .conda file. You do not need to know how these file formats work, but now you can recognize them.
               To install a package, you need a package manager. This is software that installs a package for you. Conda packages are installed with the package manager Conda. The recommended way to get Conda is through one of its distributions. There are two popular distributions of Conda: Miniconda and Anaconda.</p>

               Besides package manager, Conda has two additional functionalities:
               <li>Environment manager</li>
               <li>Dependency manager</li>
               <p>Some software have a range of dependency versions they are compatible with. Additionally, as a user, you may specify a specific version of one or more of the packages that need to be installed. As a dependency manager, Conda analyzes the requirements of each package and identifies a set of packages and versions that satisfy these requirements without conflicts. This saves you from manually resolving the dependencies.</p>
               <h3><strong>Environment manager</strong></h3>
               <p>Not all packages are compatible. For instance, two packages might conflict when they require different versions of the same dependency. If installed in the same space, they would conflict and cause errors. Conda environments are isolated spaces where packages can be installed without interfering with each other. In this way, each package can have its own environment with the specific dependencies it needs.
                  With Conda, you can easily create, update, and delete these environments, providing an efficient way to manage your software.
               </p>
            <h3><strong>Dependency manager</strong></h3>
            <p>Some software have a range of dependencies they are compatible with. Conda automatically finds a combination of packages that is compatible with each other.</p>
            <p>The first step in using Conda packages is to install a distribution. If you already have a Conda or Mamba distribution installed, you can skip the installation step. In this workshop, we will install Miniconda, which is the lightweight version and thus requires far less disk space than Anaconda.</p>
            <details><summary>Optional: other package managers</summary>
               <p>Mamba is a reimplementation of Conda, that is significantly faster during installation and dependency resolution. Mamba is fully compatible with Conda packages and supports most 
                  Conda commands. You can use Mamba by either installing the Mamba package in your base environment, or by installing its own standalone distribution Micromamba.
                  However, note that Mamba and Conda do not coexist happily. Also, Conda is still the more popular and supported than Mamba, and therefore it is preferred if you eventually want to share your code with others.
               </p>
               <p>Finally, Pip is a package manager specifically for Python. Pip has the most extensive library of Python packages. This means that some packages are only available through Pip.
                  It is not advised to combine several package managers. However, in case you need to install a Pip package in a Conda environment, you can do so by installing Pip and other packages with Conda, and only at the very last install the necessary package via Pip. In the figure below, you can find an overview and brief comparison between Conda, Mamba and Pip.</p>
               <figure>
                  <picture>
                     </source> <img src="/assets/img/conda.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> 
                     <source class="responsive-img-srcset" srcset=" //assets/img/conda-1400.webp 1400w, " sizes="95vw" type="image/webp">
                  </picture>
               </figure>
               <div class="caption">Overview of popular package managers Pip, Conda and Mamba.</div>
            </details>
            <h2 id="Installation">Install Miniconda</h2>
            <p>The most up-to-date information on how to install Miniconda is to go to the official documentation: <a href="https://docs.conda.io/projects/miniconda/en/latest/miniconda-install.html" rel="external nofollow noopener" target="_blank">https://docs.conda.io/projects/miniconda/en/latest/miniconda-install.html</a> 
               However, for this workshop (Date: 8 Jan 2023), you can follow the steps below.</p>
            <p>Connect to the VSC, either via OnDemand or by using a terminal emulator like Putty. Then, go to the DATA directory:
               <div class="language-shell highlighter-rouge">
                  <div class="highlight">
                     <pre class="highlight"><code><span class="nf">cd</span><span class="s"> $VSC_DATA</span></code></pre>
                  </div>
               </div>
            </p>
            <p>Download the installer using the wget command. Optionally, set the filename to ./miniconda.sh with option <em>-O</em>:</p>
            <div class="language-shell highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="nf">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><span class="nf"> -O </span><span class="s">./miniconda.sh</span></code></pre>
               </div>
            </div>
            <p>Next, make the installer executable using the command:</p>
            <div class="language-shell highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="nf">chmod +x </span><span class="s">miniconda.sh</span></code></pre>
               </div>
            </div>
            Run the installer:
            <div class="language-shell highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="s">./miniconda.sh</span></code></pre>
               </div>
            </div>
            <p>Follow the instruction in the terminal. When asked about the location, the installer with automatically choose a path in your home folder. Make sure to specify a location in the data folder, e.g. $VSC_DATA/miniconda3. 
               Next, when asked to update your shell profile, answer "yes". This way, conda will be intialized when you open a terminal. Additionally, the installer activates the base environment. If can always modify this behavior by running:
               </p>
            <div class="language-shell highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="nf">conda config --set auto_active_base</span><span> true </span><span># to activate the automatic activation of base</span></code></pre> 
                  <pre class="highlight"><code><span class="nf">conda config --set auto_active_base</span><span> false </span><span># to deactivate the automatic activation of base</span></code></pre> 
               </div>
            </div>
            <p></p>
            <p>Reopen the terminal for the changes to take effect. If the installation was succesful, running <code class="language-plaintext highlighter-rouge">which conda</code> should show output.</p>
            <p>To get a list of all Conda environments, you can run the command: <code class="language-plaintext highlighter-rouge">conda env list</code>.
            For now, you only have the base environment. It is advised not to add packages to your base environment. The activated environment is marked by "*".
            </p>
            <figure>
               <picture>
                  <source class="responsive-img-srcset" srcset=" //assets/img/conda_env_list-480.webp 480w, /assets/img/conda_env_list-800.webp 800w, /assets/img/conda_env_list-1400.webp 1400w, " sizes="95vw" type="image/webp">
                  </source> <img src="/assets/img/conda_env_list.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> 
               </picture>
            </figure>
            <div class="caption">Output of the command <code class="language-plaintext highlighter-rouge">conda env list</code> after the installation.</div>
            <h2 id="Conda commands">Conda commands</h2>
            <p>Below, you can find a list of some useful conda commands. For example purposes, let's assume you are working with a Conda environment called example_env. When you are running these commands, do not forget to replace the environment's name to yours.</p>
            
            <div class="language-shell highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="c">#List the available environments <span class="nf">conda env list</span></code></pre>
               </div>
            </div>

            <div class="language-plaintext highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="c">#Create a new Conda environment </span><span class="nf">conda create --name </span><span class='s'>example_env</span><span class="c">#Check the destination (should be: /path/to/miniconda3/envs/example_env) </span><span class="c">Answer "yes" to continue or "no" to quit</span></code></pre>
               </div>
            </div>

            <div class="language-plaintext highlighter-rouge">
               <div class="highlight">
                  <pre class="highlight"><code><span class="cm"> 
                     # activate a Conda environment
                     conda activate example_env
                     # list the packages installed in the current environment
                     conda list
                     # deactivate the current environment
                     conda deactivate
                     # remove a Conda environment
                     conda remove --name example_env --all
                  </span></code></pre>
               </div>
            </div>

            <h2 id="Tips">Tips</h2>
            <li>It is advised to use separate environments for each software/workflow.</li>
            <li>If the active Conda environment already has a lot of packages installed, the installation of an additional package, solving the environment will take typically take longer.</li>
            <li>The fastest way to set-up an environment is to specify all packages you want to use at the creation step. An example is given in Module 3: SNP calling - from fastq to vcf (# add link).</li>
            <h2>You have completed Module 1!</h2>
            <figure>
               <picture>
                  <source class="responsive-img-srcset" srcset=" //assets/img/anaconda-480.webp 480w, /assets/img/anaconda-800.webp 800w, /assets/img/anaconda-1400.webp 1400w, " sizes="95vw" type="image/webp">
                  </source> <img src="/assets/img/anaconda.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> 
               </picture>
            </figure>
            <h3>Next module:</h3>
            <li> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/workshop/2_Introduction_to_Slurm_jobs/">Module 2: Introduction to Slurm jobs</a> </li>

         </d-article>
         <d-appendix>
            <d-citation-list></d-citation-list>
         </d-appendix>
         <d-bibliography src="/assets/bibliography/2018-12-22-distill.bib"></d-bibliography>
      </div>
      <footer class="fixed-bottom">
         <div class="container mt-0"> © Copyright 2023 Sophie Colette. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div>
      </footer>
      <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> 
   </body>
</html>